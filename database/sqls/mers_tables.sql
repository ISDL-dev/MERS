CREATE TABLE IF NOT EXISTS trials(
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    location VARCHAR(64),
    platform VARCHAR(64),
    pre_started_at DATETIME NOT NULL,
    started_at DATETIME NOT NULL,
    ended_at DATETIME NOT NULL,
    rating_second_by_media INT UNSIGNED,
    number_of_medias INT UNSIGNED
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- trialsとsubjectsの関係は1対1
CREATE TABLE IF NOT EXISTS subjects(
    trial_id INT UNSIGNED PRIMARY KEY,
    age INT UNSIGNED,
    gender VARCHAR(64),
    handedness VARCHAR(64) ,
    vision VARCHAR(64),
    vision_aid VARCHAR(64),
    education VARCHAR(64),
    alcohol_consumption VARCHAR(64),
    coffee_consumption VARCHAR(64),
    tea_consumption VARCHAR(64),
    tobacco_consumption VARCHAR(64),
    drug_consumption VARCHAR(64),
    syndroms VARCHAR(64),
    hours_of_sleep_last_night FLOAT,
    normal_hours_of_sleep FLOAT,
    level_of_alertness VARCHAR(64),
    head_circumference FLOAT,
    distance_nasion_inion FLOAT,
    distance_left_right_jaw_hinge FLOAT,
    FOREIGN KEY (trial_id) REFERENCES trials(id) ON DELETE CASCADE ON UPDATE CASCADE
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- trialsとsignalsの関係は1対1
CREATE TABLE IF NOT EXISTS signals(
    trial_id INT UNSIGNED PRIMARY KEY,
    trend_range TEXT NOT NULL,
    channel_types VARCHAR(128) NOT NULL,
    calibration VARCHAR(128) NOT NULL,
    analyzed_signal_filename VARCHAR(128) NOT NULL,
    raw_signal_filename VARCHAR(64) NOT NULL,
    FOREIGN KEY (trial_id) REFERENCES trials(id) ON DELETE CASCADE ON UPDATE CASCADE
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- ratingとimagesの関係は1対1
CREATE TABLE IF NOT EXISTS images(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    dataset VARCHAR(64),
    filename VARCHAR(64) NOT NULL
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- ratingとimagesの関係は1対1
CREATE TABLE IF NOT EXISTS movies(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    dataset VARCHAR(64),
    filename VARCHAR(64) NOT NULL
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- trialsとratingの関係は1対多
CREATE TABLE IF NOT EXISTS rating(
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    valence FLOAT NOT NULL,
    arousal FLOAT NOT NULL,
    liking FLOAT,
    dominance FLOAT,
    famility FLOAT,
    trial_id INT UNSIGNED NOT NULL,
    image_id INT UNSIGNED,
    movie_id INT UNSIGNED,
    FOREIGN KEY (trial_id) REFERENCES trials(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (image_id) REFERENCES images(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (movie_id) REFERENCES movies(id) ON DELETE CASCADE ON UPDATE CASCADE
)DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO images (dataset, filename)
VALUES 
('OASIS', 'Acorns1.jpg'),
('OASIS', 'Astronaut1.jpg'),
('OASIS', 'Bark3.jpg'),
('OASIS', 'Beach1.jpg'),
('OASIS', 'Beach7.jpg'),
('OASIS', 'Bird1.jpg'),
('OASIS', 'Bloodyknife1.jpg'),
('OASIS', 'Boredpose2.jpg'),
('OASIS', 'Boredpose3.jpg'),
('OASIS', 'Boxing2.jpg'),
('OASIS', 'Carcash1.jpg'),
('OASIS', 'Cardboard3.jpg'),
('OASIS', 'Cat5.jpg'),
('OASIS', 'Clean1.jpg'),
('OASIS', 'Couple4.jpg'),
('OASIS', 'Cups3.jpg'),
('OASIS', 'Destruction10.jpg'),
('OASIS', 'Destruction2.jpg'),
('OASIS', 'Destruction3.jpg'),
('OASIS', 'Dirt5.jpg'),
('OASIS', 'Dog12.jpg'),
('OASIS', 'Dog18.jpg'),
('OASIS', 'Dog19.jpg'),
('OASIS', 'Dog2.jpg'),
('OASIS', 'Dog5.jpg'),
('OASIS', 'Dog6.jpg'),
('OASIS', 'Dogattack1.jpg'),
('OASIS', 'Dogattack3.jpg'),
('OASIS', 'Eating3.jpg'),
('OASIS', 'Elephant1.jpg'),
('OASIS', 'Explosion2.jpg'),
('OASIS', 'Explosion4.jpg'),
('OASIS', 'Father1.jpg'),
('OASIS', 'Feces1.jpg'),
('OASIS', 'Feces2.jpg'),
('OASIS', 'Ferret1.jpg'),
('OASIS', 'Fire7.jpg'),
('OASIS', 'Fire9.jpg'),
('OASIS', 'Fireworks1.jpg'),
('OASIS', 'Fireworks3.jpg'),
('OASIS', 'Fireworks7.jpg'),
('OASIS', 'Flowers6.jpg'),
('OASIS', 'Food3.jpg'),
('OASIS', 'Frustratedpose1.jpg'),
('OASIS', 'Frustratedpose3.jpg'),
('OASIS', 'Frustratedpose7.jpg'),
('OASIS', 'Galaxy8.jpg'),
('OASIS', 'Garbagedump1.jpg'),
('OASIS', 'Garbagedump2.jpg'),
('OASIS', 'Garbagedump3.jpg'),
('OASIS', 'Garbagedump4.jpg'),
('OASIS', 'Garbagedump5.jpg'),
('OASIS', 'Garbagedump6.jpg'),
('OASIS', 'Garbagedump7.jpg'),
('OASIS', 'Garbagedump8.jpg'),
('OASIS', 'Grass1.jpg'),
('OASIS', 'Grass3.jpg'),
('OASIS', 'Grass4.jpg'),
('OASIS', 'Grass5.jpg'),
('OASIS', 'Grass7.jpg'),
('OASIS', 'Hallway1.jpg'),
('OASIS', 'Hangover1.jpg'),
('OASIS', 'Happyface1.jpg'),
('OASIS', 'Intensity1.jpg'),
('OASIS', 'Jail2.jpg'),
('OASIS', 'Jail4.jpg'),
('OASIS', 'KKKrally2.jpg'),
('OASIS', 'Lake12.jpg'),
('OASIS', 'Lake14.jpg'),
('OASIS', 'Lake15.jpg'),
('OASIS', 'Lake16.jpg'),
('OASIS', 'Miserablepose2.jpg'),
('OASIS', 'Mother6.jpg'),
('OASIS', 'Mother7.jpg'),
('OASIS', 'Neutralface2.jpg'),
('OASIS', 'Opossum1.jpg'),
('OASIS', 'Ornament1.jpg'),
('OASIS', 'Paper3.jpg'),
('OASIS', 'Parachuting3.jpg'),
('OASIS', 'Penguins2.jpg'),
('OASIS', 'Pinecone1.jpg'),
('OASIS', 'Pinecone3.jpg'),
('OASIS', 'Present2.jpg'),
('OASIS', 'Prison2.jpg'),
('OASIS', 'Pumpkin1.jpg'),
('OASIS', 'Rafting5.jpg'),
('OASIS', 'Rainbow2.jpg'),
('OASIS', 'Rocks1.jpg'),
('OASIS', 'Rocks4.jpg'),
('OASIS', 'Roofing4.jpg'),
('OASIS', 'Scaredface3.jpg'),
('OASIS', 'Scaryface1.jpg'),
('OASIS', 'School6.jpg'),
('OASIS', 'Shark4.jpg'),
('OASIS', 'Shooting1.jpg'),
('OASIS', 'Shot1.jpg'),
('OASIS', 'Shot2.jpg'),
('OASIS', 'Shot3.jpg'),
('OASIS', 'Sidewalk6.jpg'),
('OASIS', 'Skydiving3.jpg'),
('OASIS', 'Skydiving5.jpg'),
('OASIS', 'Snake1.jpg'),
('OASIS', 'Snake2.jpg'),
('OASIS', 'Snake6.jpg'),
('OASIS', 'Snow1.jpg'),
('OASIS', 'Snow2.jpg'),
('OASIS', 'Statue1.jpg'),
('OASIS', 'Sunset4.jpg'),
('OASIS', 'Surgery1.jpg'),
('OASIS', 'Thunderstorm3.jpg'),
('OASIS', 'Toilet4.jpg'),
('OASIS', 'Tornado1.jpg'),
('OASIS', 'War1.jpg'),
('OASIS', 'War6.jpg'),
('OASIS', 'Wedding12.jpg'),
('OASIS', 'Wedding4.jpg'),
('OASIS', 'Windmill1.jpg'),
('OASIS', 'Wolf2.jpg'),
('OASIS', 'Yarn1.jpg'),
('OASIS', 'Yarn3.jpg');
